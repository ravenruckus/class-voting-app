pipeline {
	agent any

	stages {
		stage("build") {
			when {
                		changeset "**/result/**"
 			 }	
             		agent {
                		docker {
                    			image '21-alpine3.18'
                		}		
             		}		
		    	steps {
				echo 'Compiling result app..'
				dir('result') {
					sh 'npm install'
				}	
			}
		}
		stage("test") {
            		when {
                		changeset "**/result/**"
            		}		
            		agent {
                		docker {
                    			image '21-alpine3.18'
               			 }		
            		}		
			steps {
				echo 'Running Unit Tests on result app..'
				dir('result') {
					sh 'npm install'
                    			sh 'npm test'
             
				}
			}
		}
	}
	
}	
